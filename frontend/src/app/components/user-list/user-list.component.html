<div class="container">
	<h2>Les membres du réseau</h2>
	<p>Vous pouvez retrouver ici l'ensemble des utilisateurs du réseau NDA. Vous pouvez utiliser les tris par colonne ou la barre de recherche ci-dessous pour trouver une personne.</p>
</div>
<div class="container">
	<div class="input-group mb-3">
		<div class="input-group-prepend">
			<span class="input-group-text" id="inputGroup-sizing-default"><i class="fa fa-search"></i></span>
		</div>
		<input id="searchBar" class="form-control" [(ngModel)]="searchText" (ngModelChange)="setPage(1)" placeholder="Rechercher un membre par prénom" type="text">
	</div>
	<table class="table table-striped table-sm">
		<thead>
			<tr>
				<th scope="col" (click)="setPage(1, 'id')">Id
					<i class="fa" [ngClass]="{'fa-angle-down': (column == 'id' && !isDesc),'fa-angle-up': (column == 'id' && isDesc) }" aria-hidden="true"></i>
				</th>
				<th scope="col" (click)="setPage(1, 'name')">Prénom
					<i class="fa" [ngClass]="{'fa-angle-down': (column == 'name' && !isDesc),'fa-angle-up': (column == 'name' && isDesc) }" aria-hidden="true"></i>
				</th>
				<th scope="col" (click)="setPage(1, 'surname')">Nom
					<i class="fa" [ngClass]="{'fa-angle-down': (column == 'surname' && !isDesc),'fa-angle-up': (column == 'surname' && isDesc) }" aria-hidden="true"></i>
				</th>
				<th scope="col" (click)="setPage(1, 'location.town')">Ville
					<i class="fa" [ngClass]="{'fa-angle-down': (column == 'town' && !isDesc),'fa-angle-up': (column == 'town' && isDesc) }" aria-hidden="true"></i>
				</th>
				<th scope="col" (click)="setPage(1, 'location.province')">Département
					<i class="fa" [ngClass]="{'fa-angle-down': (column == 'province' && !isDesc),'fa-angle-up': (column == 'province' && isDesc) }" aria-hidden="true"></i>
				</th>
				<th scope="col" (click)="setPage(1, 'grade.gradeName')">Grade
					<i class="fa" [ngClass]="{'fa-angle-down': (column == 'gradeName' && !isDesc),'fa-angle-up': (column == 'gradeName' && isDesc) }" aria-hidden="true"></i>
				</th>
			</tr>
		</thead>
		<tbody>
			<tr *ngFor="let user of pagedUsers">
				<th scope="row">{{ user.id }}</th>
				<td><a routerLink="/utilisateurs/{{ user.id }}">{{ user.name }}</a></td>
				<td>{{ user.surname }}</td>
				<td>{{ user.location.town }}</td>
				<td>{{ user.location.province }}</td>
				<td><span class="lead badge" [ngClass]="{'badge-warning': user.grade.id==3, 'badge-danger': user.grade.id==2, 'badge-success': user.grade.id==1}" title="{{ user.grade.description }}">{{ user.grade.gradeName }}</span></td>
			</tr>
		</tbody>
	</table>
	<!--pagination-->
	<nav aria-label="...">
		<ul *ngIf="pagination.pages && pagination.pages.length" class="pagination">
			<li [ngClass]="{disabled:pagination.currentPage === 1}" class="page-item">
				<a class="page-link" (click)="setPage(1)">Première page</a>
			</li>
			<li [ngClass]="{disabled:pagination.currentPage === 1}" class="page-item">
				<a class="page-link" (click)="setPage(pagination.currentPage - 1)">Précédente</a>
			</li>
			<li *ngFor="let page of pagination.pages" [ngClass]="{active:pagination.currentPage === page}" class="page-item">
				<a class="page-link" (click)="setPage(page)">{{ page }}</a>
			</li>
			<li [ngClass]="{disabled:pagination.currentPage === pagination.totalPages}" class="page-item">
				<a class="page-link" (click)="setPage(pagination.currentPage + 1)">Suivante</a>
			</li>
			<li [ngClass]="{disabled:pagination.currentPage === pagination.totalPages}" class="page-item">
				<a class="page-link" (click)="setPage(pagination.totalPages)">Dernière page</a>
			</li>
		</ul>
	</nav>
</div>